{"ast":null,"code":"import _objectSpread from\"/home/mspl/Desktop/peerformance_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _defineProperty from\"/home/mspl/Desktop/peerformance_frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _createForOfIteratorHelper from\"/home/mspl/Desktop/peerformance_frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"/home/mspl/Desktop/peerformance_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* Regions start */import React,{useRef,useState}from\"react\";import{Col,Modal,Row}from\"react-bootstrap\";import{peerformanceBackground2,peerformanceBlueButton,peerformanceBlueText,peerformanceDarkBlue,peerformanceGreen,peerformanceListItem}from\"./colours\";import arrowLeft from\"./Styleguide/arrow_left.svg\";import{useDispatch,useSelector}from\"react-redux\";import{getCityChildren,getRegionById,getRegionChildren,updateLastRegion}from\"./store/dashboardActions\";import{fetchRegionChild}from\"./store/dashboardFetches\";import{createStore}from'redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var global=\"Global\";var europe=\"Europe\";var allOfUk=\"UK\";var activateCites=false;function Regions(props,regionID){var dispatch=useDispatch();var dataExist=false;// State management\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),getPreviouslySelected=_useState2[0],setPreviouslySelected=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),getSelectedTxt=_useState4[0],setSelectedTxt=_useState4[1];var allRegions=JSON.parse(window.localStorage.getItem(\"regions\"));console.log(\"allRegions\",allRegions);// Scotland\nvar scotLandLeftCol=[];var scotLandRightCol=[];var regionsLeftCol=[];var regionsRightCol=[];// Use the top region data to create the first three buttons - UK, Europe and Global\nvar topRegions=useSelector(function(state){return state.dashboard.top3Regions;});if(topRegions.length>1){global=topRegions[0].Name;europe=topRegions[1].Name;allOfUk=topRegions[2].Name;}var createColumns2=function createColumns2(data,leftCol,rightCol){var _iterator=_createForOfIteratorHelper(data.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),index=_step$value[0],value=_step$value[1];if((index+1)%2!==0){leftCol.push(/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"20px\",paddingTop:\"16px\",paddingBottom:\"12px\",marginTop:\"12px\",borderRadius:\"12px\",backgroundColor:peerformanceBlueButton},id:value.ID,\"data-leve\":value.Level,\"data-parendId\":value.ParentID,\"data-name\":value.Name,\"data-RegionTypesId\":value.RegionTypesID,onClick:listClicked,children:value.Name},index));}else{var _jsx2;rightCol.push(/*#__PURE__*/_jsx(\"div\",(_jsx2={style:{paddingLeft:\"20px\",paddingTop:\"16px\",paddingBottom:\"12px\",marginTop:\"12px\",borderRadius:\"12px\",backgroundColor:peerformanceBlueButton},id:value.ID,\"data-leve\":value.Level,\"data-parendId\":value.ParentID,\"data-name\":value.Name,\"data-RegionTypesId\":value.RegionTypesID},_defineProperty(_jsx2,\"id\",value.ID),_defineProperty(_jsx2,\"onClick\",listClicked),_defineProperty(_jsx2,\"children\",value.Name),_jsx2),index));}}}catch(err){_iterator.e(err);}finally{_iterator.f();}};var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),getSelectedRegionID=_useState6[0],setSelectedRegionID=_useState6[1];var previouslySelected=[];var listClicked=function listClicked(e){sessionStorage.setItem(\"regionId\",e.target.id);// setting the region id on session storage\nsetSelectedTxt(e.target.getAttribute(\"data-name\"));setSelectedRegionID(e.target.id);var current=getPreviouslySelected;if(current==null||current===\"undefined\"){setPreviouslySelected(e.target.id);}var selectedRegionId=e.target.id;if(current!==null||current!==selectedRegionId){document.getElementById(selectedRegionId).style.color=peerformanceBlueText;document.getElementById(selectedRegionId).style.backgroundColor=peerformanceGreen;if(current>0){document.getElementById(current).style.color=\"white\";document.getElementById(current).style.backgroundColor=peerformanceBlueButton;}setPreviouslySelected(e.target.id);}else{alert(\"Contact the admin if you see this: Region page Error! \");setPreviouslySelected(e.target.id);}var selectedTxt=e.target.innerText;console.log(\"previouslySelected\",previouslySelected);if(selectedTxt==='Global'){window.localStorage.setItem(\"selectedRegion\",selectedTxt);document.getElementById(\"citesDiv\").style.display=\"none\";document.getElementById(\"regionsDiv\").style.display=\"none\";}if(selectedTxt==='Europe'){window.localStorage.setItem(\"selectedRegion\",selectedTxt);document.getElementById(\"citesDiv\").style.display=\"none\";document.getElementById(\"regionsDiv\").style.display=\"none\";}for(var i=0;i<towns_cities_Scotland.length;i++){if(selectedTxt===towns_cities_Scotland[i]){window.localStorage.setItem(\"selectedRegion\",selectedTxt);}}if(selectedTxt==='UK'){activateCites=true;dispatch(getRegionChildren(selectedRegionId));document.getElementById(\"regionsDiv\").style.display=\"inline\";document.getElementById(\"citesDiv\").style.display=\"none\";}if(selectedTxt==='Scotland'||selectedTxt===\"Greater London\"){dispatch(getCityChildren(selectedRegionId));document.getElementById(\"citesDiv\").style.display=\"inline\";}for(var _i=0;_i<regions.length;_i++){if(selectedTxt===regions[_i]){document.getElementById(\"citesDiv\").style.display=\"inline\";window.localStorage.setItem(\"selectedRegion\",selectedTxt);}}window.localStorage.setItem(\"selectedRegionId\",selectedRegionId);};var confirmSelection=function confirmSelection(){sessionStorage.setItem(\"regionId\",getSelectedRegionID);// Send and update the region id on the database\ndispatch(updateLastRegion(getSelectedRegionID));dispatch(getRegionById(getSelectedRegionID));sessionStorage.setItem(\"regionName\",getSelectedTxt);sessionStorage.getItem(\"regionName\");window.location.reload();};var regions=useSelector(function(state){return state.dashboard.regionChildren;});createColumns2(regions,regionsLeftCol,regionsRightCol);var towns_cities_Scotland=useSelector(function(state){return state.dashboard.citesChildren;});if(activateCites===true){createColumns2(towns_cities_Scotland,scotLandLeftCol,scotLandRightCol);}/* Regions end*/return/*#__PURE__*/_jsx(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,style:{paddingTop:\"10px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-lg\",style:{backgroundColor:peerformanceDarkBlue,color:\"white\"},children:[/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsxs(Modal.Body,{className:\"col-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"h6\",{style:{float:\"left\"},onClick:props.onHide,children:[/*#__PURE__*/_jsx(\"img\",{src:arrowLeft,alt:\"\"}),\" \\xA0 \\xA0 Change peer group \"]}),/*#__PURE__*/_jsx(\"h6\",{style:{float:\"right\"},onClick:props.onHide,children:\" X \"})]}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm card\",style:{backgroundColor:\"initial\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"btn-group me-8\",role:\"group\",\"aria-label\":\"First group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn shadow-none\",id:\"3\",onClick:listClicked,style:{color:\"white\",backgroundColor:peerformanceBlueButton,paddingLeft:\"30px\",paddingRight:\"30px\"},\"data-name\":\"UK\",children:allOfUk})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-1\",style:{width:\"4%\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm card\",style:{backgroundColor:\"initial\"},id:\"keyWordSearchDiv\",children:/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Second group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn shadow-none\",id:\"2\",onClick:listClicked,style:{color:\"white\",backgroundColor:peerformanceBlueButton,paddingLeft:\"30px\",paddingRight:\"30px\"},\"data-name\":\"Europe\",children:europe})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-1\",style:{width:\"4%\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm card\",style:{backgroundColor:\"initial\"},id:\"quickLinksDiv\",children:/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Third group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn shadow-none\",id:\"1\",onClick:listClicked,style:{color:\"white\",backgroundColor:peerformanceBlueButton,paddingLeft:\"30px\",paddingRight:\"30px\"},\"data-name\":\"Global\",children:global})})})]})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:peerformanceBackground2,paddingLeft:\"10px\",paddingRight:\"20px\",paddingTop:\"0px\",paddingBottom:\"20px\",borderRadius:\"10px\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container container-fluid overflow-auto\",children:[/*#__PURE__*/_jsx(\"div\",{style:{height:\"20px\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"container container-fluid overflow-auto\",style:{height:\"530px\",overflowY:\"scroll\",overflow:\"scroll\",scrollBehavior:\"smooth\",scrollbarColor:\"green\"},children:[/*#__PURE__*/_jsxs(\"div\",{id:\"regionsDiv\",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"18px\"},children:\"Regions\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:regionsLeftCol}),/*#__PURE__*/_jsx(Col,{children:regionsRightCol})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{id:\"citesDiv\",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"18px\"},children:\"Cites\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:scotLandLeftCol}),/*#__PURE__*/_jsx(Col,{children:scotLandRightCol})]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"float-end\",children:[\" Your selected location is: \",/*#__PURE__*/_jsx(\"b\",{id:\"yourSelectedRegion\",style:{color:peerformanceGreen},children:getSelectedTxt})]})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success float-end\",style:{margin:\"10px\"},onClick:confirmSelection,children:\" Confirm Selection\"})]})]})]})}));}export default Regions;","map":{"version":3,"sources":["/home/mspl/Desktop/peerformance_frontend/src/Regions.js"],"names":["React","useRef","useState","Col","Modal","Row","peerformanceBackground2","peerformanceBlueButton","peerformanceBlueText","peerformanceDarkBlue","peerformanceGreen","peerformanceListItem","useDispatch","useSelector","getCityChildren","getRegionById","getRegionChildren","updateLastRegion","fetchRegionChild","createStore","global","europe","allOfUk","activateCites","Regions","props","regionID","dispatch","dataExist","getPreviouslySelected","setPreviouslySelected","getSelectedTxt","setSelectedTxt","allRegions","JSON","parse","window","localStorage","getItem","console","log","scotLandLeftCol","scotLandRightCol","regionsLeftCol","regionsRightCol","topRegions","state","dashboard","top3Regions","length","Name","createColumns2","data","leftCol","rightCol","entries","index","value","push","paddingLeft","paddingTop","paddingBottom","marginTop","borderRadius","backgroundColor","ID","Level","ParentID","RegionTypesID","listClicked","getSelectedRegionID","setSelectedRegionID","previouslySelected","e","sessionStorage","setItem","target","id","getAttribute","current","selectedRegionId","document","getElementById","style","color","alert","selectedTxt","innerText","display","i","towns_cities_Scotland","regions","confirmSelection","location","reload","regionChildren","citesChildren","overflow","float","onHide","arrowLeft","paddingRight","width","height","overflowY","scrollBehavior","scrollbarColor","fontSize","margin"],"mappings":"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","sourcesContent":["/* Regions start */\n\nimport React, {useRef, useState} from \"react\";\nimport {Col, Modal, Row} from \"react-bootstrap\";\nimport {\n    peerformanceBackground2,\n    peerformanceBlueButton,\n    peerformanceBlueText,\n    peerformanceDarkBlue,\n    peerformanceGreen, peerformanceListItem\n} from \"./colours\";\nimport arrowLeft from \"./Styleguide/arrow_left.svg\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getCityChildren, getRegionById, getRegionChildren, updateLastRegion} from \"./store/dashboardActions\";\nimport {fetchRegionChild} from \"./store/dashboardFetches\";\nimport {createStore} from 'redux'\n\n\nlet global = \"Global\";\nlet europe = \"Europe\";\nlet allOfUk = \"UK\";\nlet activateCites = false;\n\nfunction Regions(props, regionID) {\n\n    let dispatch = useDispatch();\n\n    let dataExist = false;\n\n    // State management\n    const [getPreviouslySelected, setPreviouslySelected] = useState();\n    const [getSelectedTxt, setSelectedTxt] = useState();\n\n\n    let allRegions = JSON.parse(window.localStorage.getItem(\"regions\"));\n    console.log(\"allRegions\", allRegions);\n\n\n    // Scotland\n    let scotLandLeftCol = []\n    let scotLandRightCol = []\n\n    let regionsLeftCol = []\n    let regionsRightCol = []\n\n    // Use the top region data to create the first three buttons - UK, Europe and Global\n    let topRegions = useSelector(state => state.dashboard.top3Regions);\n\n    if (topRegions.length > 1) {\n        global = topRegions[0].Name;\n        europe = topRegions[1].Name;\n        allOfUk = topRegions[2].Name;\n    }\n\n    let createColumns2 = (data, leftCol, rightCol) => {\n\n        for (const [index, value] of data.entries()) {\n            if ((index + 1) % 2 !== 0) {\n                leftCol.push(\n                    <div\n                        key={index}\n                        style={{\n                            paddingLeft: \"20px\",\n                            paddingTop: \"16px\",\n                            paddingBottom: \"12px\",\n                            marginTop: \"12px\",\n                            borderRadius: \"12px\",\n                            backgroundColor: peerformanceBlueButton\n                        }}\n                        id={value.ID}\n                        data-leve={value.Level}\n                        data-parendId={value.ParentID}\n                        data-name={value.Name}\n                        data-RegionTypesId={value.RegionTypesID}\n                        onClick={listClicked}\n                    >\n                        {value.Name}\n                    </div>)\n\n            } else {\n                rightCol.push(\n                    <div\n                        key={index}\n                        style={{\n                            paddingLeft: \"20px\",\n                            paddingTop: \"16px\",\n                            paddingBottom: \"12px\",\n                            marginTop: \"12px\",\n                            borderRadius: \"12px\",\n                            backgroundColor: peerformanceBlueButton,\n                        }}\n                        id={value.ID}\n                        data-leve={value.Level}\n                        data-parendId={value.ParentID}\n                        data-name={value.Name}\n                        data-RegionTypesId={value.RegionTypesID}\n                        id={value.ID}\n                        onClick={listClicked}\n                    >\n                        {value.Name}\n                    </div>)\n            }\n        }\n    }\n\n    let [getSelectedRegionID, setSelectedRegionID] = useState();\n    let previouslySelected = [];\n    let listClicked = (e) => {\n        sessionStorage.setItem(\"regionId\", e.target.id); // setting the region id on session storage\n        setSelectedTxt(e.target.getAttribute(\"data-name\"))\n        setSelectedRegionID(e.target.id);\n        let current = getPreviouslySelected;\n\n        if (current == null || current === \"undefined\") {\n            setPreviouslySelected(e.target.id);\n        }\n\n        let selectedRegionId = e.target.id;\n\n        if (current !== null || current !== selectedRegionId) {\n            document.getElementById(selectedRegionId).style.color = peerformanceBlueText;\n            document.getElementById(selectedRegionId).style.backgroundColor = peerformanceGreen;\n            if (current > 0) {\n                document.getElementById(current).style.color = \"white\";\n                document.getElementById(current).style.backgroundColor = peerformanceBlueButton;\n            }\n            setPreviouslySelected(e.target.id);\n\n        } else {\n            alert(\"Contact the admin if you see this: Region page Error! \")\n            setPreviouslySelected(e.target.id);\n        }\n\n        let selectedTxt = e.target.innerText;\n        console.log(\"previouslySelected\", previouslySelected);\n\n        if (selectedTxt === 'Global') {\n            window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n            document.getElementById(\"citesDiv\").style.display = \"none\";\n            document.getElementById(\"regionsDiv\").style.display = \"none\";\n        }\n        if (selectedTxt === 'Europe') {\n            window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n            document.getElementById(\"citesDiv\").style.display = \"none\";\n            document.getElementById(\"regionsDiv\").style.display = \"none\";\n        }\n\n        for (let i = 0; i < towns_cities_Scotland.length; i++) {\n            if (selectedTxt === towns_cities_Scotland[i]) {\n                window.localStorage.setItem(\"selectedRegion\", selectedTxt)\n            }\n        }\n\n        if (selectedTxt === 'UK') {\n            activateCites = true;\n\n            dispatch(getRegionChildren(selectedRegionId))\n            document.getElementById(\"regionsDiv\").style.display = \"inline\";\n            document.getElementById(\"citesDiv\").style.display = \"none\";\n        }\n\n        if (selectedTxt === 'Scotland' || selectedTxt === \"Greater London\") {\n            dispatch(getCityChildren(selectedRegionId))\n            document.getElementById(\"citesDiv\").style.display = \"inline\";\n        }\n\n\n        for (let i = 0; i < regions.length; i++) {\n            if (selectedTxt === regions[i]) {\n                document.getElementById(\"citesDiv\").style.display = \"inline\";\n                window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n            }\n        }\n\n        window.localStorage.setItem(\"selectedRegionId\", selectedRegionId);\n    }\n\n    let confirmSelection = () => {\n        sessionStorage.setItem(\"regionId\", getSelectedRegionID);\n        // Send and update the region id on the database\n        dispatch(updateLastRegion(getSelectedRegionID));\n        dispatch(getRegionById(getSelectedRegionID));\n\n        sessionStorage.setItem(\"regionName\", getSelectedTxt)\n        sessionStorage.getItem(\"regionName\")\n\n        window.location.reload();\n    }\n\n\n    const regions = useSelector(state => {\n        return state.dashboard.regionChildren;\n    });\n    createColumns2(regions, regionsLeftCol, regionsRightCol)\n\n\n    const towns_cities_Scotland = useSelector(state => {\n        return state.dashboard.citesChildren;\n    });\n\n    if (activateCites === true) {\n        createColumns2(towns_cities_Scotland, scotLandLeftCol, scotLandRightCol)\n    }\n\n    /* Regions end*/\n    return (\n        <Modal\n            {...props}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered\n            style={{paddingTop: \"10px\"}}\n        >\n\n            <div className=\"container-lg\" style={{\n                backgroundColor: peerformanceDarkBlue,\n                color: \"white\",\n            }}>\n                <p></p>\n                <Modal.Body className=\"col-sm\">\n\n                    <div style={{overflow: \"hidden\"}}>\n                        <h6 style={{float: \"left\"}} onClick={props.onHide}><img src={arrowLeft} alt=\"\"\n                        /> &nbsp; &nbsp; Change peer group </h6>\n                        <h6 style={{float: \"right\"}} onClick={props.onHide}> X </h6>\n                    </div>\n                    <p></p>\n\n\n                    <div className=\"text-center\">\n\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-sm card\" style={{backgroundColor: \"initial\"}}>\n                                    <div className=\"btn-group me-8\" role=\"group\" aria-label=\"First group\">\n                                        {/* we are setting the id of each button to match the sql regions table*/}\n                                        <button type=\"button\" className=\"btn shadow-none\" id=\"3\"\n                                                onClick={listClicked}\n                                                style={{\n                                                    color: \"white\",\n                                                    backgroundColor: peerformanceBlueButton,\n                                                    paddingLeft: \"30px\",\n                                                    paddingRight: \"30px\",\n                                                }}\n                                                data-name=\"UK\">\n                                            {allOfUk}\n                                        </button>\n\n                                    </div>\n                                </div>\n\n                                <div className=\"col-sm-1\" style={{width: \"4%\"}}></div>\n                                <div className=\"col-sm card\" style={{backgroundColor: \"initial\"}}\n                                     id={\"keyWordSearchDiv\"}>\n                                    <div className=\"btn-group\" role=\"group\" aria-label=\"Second group\"\n                                    >\n                                        <button type=\"button\" className=\"btn shadow-none\" id=\"2\"\n                                                onClick={listClicked}\n                                                style={{\n                                                    color: \"white\",\n                                                    backgroundColor: peerformanceBlueButton,\n                                                    paddingLeft: \"30px\",\n                                                    paddingRight: \"30px\",\n                                                }}\n                                                data-name=\"Europe\"\n                                        >{europe}\n                                        </button>\n                                    </div>\n                                </div>\n                                <div className=\"col-sm-1\" style={{width: \"4%\"}}></div>\n\n                                <div className=\"col-sm card\" style={{backgroundColor: \"initial\"}}\n                                     id={\"quickLinksDiv\"}>\n                                    <div className=\"btn-group\" role=\"group\" aria-label=\"Third group\"\n                                    >\n                                        <button type=\"button\" className=\"btn shadow-none\" id=\"1\"\n                                                onClick={listClicked}\n                                                style={{\n                                                    color: \"white\",\n                                                    backgroundColor: peerformanceBlueButton,\n                                                    paddingLeft: \"30px\",\n                                                    paddingRight: \"30px\",\n                                                }}\n                                                data-name=\"Global\"\n                                        >{global}\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <br/>\n\n                    <div>\n                        <div style={{\n                            backgroundColor: peerformanceBackground2,\n                            paddingLeft: \"10px\",\n                            paddingRight: \"20px\",\n                            paddingTop: \"0px\",\n                            paddingBottom: \"20px\",\n                            borderRadius: \"10px\",\n\n                        }}>\n                            <div>\n                                <div></div>\n                                <div className=\"container container-fluid overflow-auto\"\n                                >\n                                    <div style={{height: \"20px\"}}></div>\n\n                                    <div className=\"container container-fluid overflow-auto\" style={{\n                                        height: \"530px\",\n                                        overflowY: \"scroll\",\n                                        overflow: \"scroll\",\n                                        scrollBehavior: \"smooth\",\n                                        scrollbarColor: \"green\"\n                                    }}>\n                                        <div id={\"regionsDiv\"} style={{display: \"none\"}}>\n                                            <p style={{fontSize: \"18px\"}}>Regions</p>\n                                            <Row>\n                                                <Col>{regionsLeftCol}</Col>\n                                                <Col>{regionsRightCol}</Col>\n                                            </Row>\n                                        </div>\n                                        <br/>\n\n                                        <div id={\"citesDiv\"} style={{display: \"none\"}}>\n                                            <p style={{fontSize: \"18px\"}}>Cites</p>\n                                            <Row>\n                                                <Col>{scotLandLeftCol}</Col>\n                                                <Col>{scotLandRightCol}</Col>\n                                            </Row>\n                                        </div>\n                                    </div>\n                                    <p className=\"float-end\"> Your selected location is: <b id=\"yourSelectedRegion\"\n                                        style={{color: peerformanceGreen}}>{getSelectedTxt}</b></p>\n                                </div>\n                            </div>\n                        </div>\n                        <button className=\"btn btn-outline-success float-end\"\n                                style={{margin: \"10px\"}}\n                                onClick={confirmSelection}> Confirm Selection\n                        </button>\n                    </div>\n                </Modal.Body>\n            </div>\n\n        </Modal>\n    )\n}\n\nexport default Regions;"]},"metadata":{},"sourceType":"module"}