{"ast":null,"code":"var _jsxFileName = \"/home/mspl/Desktop/peerformance_frontend/src/Regions.js\",\n    _s = $RefreshSig$();\n\n/* Regions start */\nimport React, { useRef, useState } from \"react\";\nimport { Col, Modal, Row } from \"react-bootstrap\";\nimport { peerformanceBackground2, peerformanceBlueButton, peerformanceBlueText, peerformanceDarkBlue, peerformanceGreen, peerformanceListItem } from \"./colours\";\nimport arrowLeft from \"./Styleguide/arrow_left.svg\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCityChildren, getRegionById, getRegionChildren, updateLastRegion } from \"./store/dashboardActions\";\nimport { fetchRegionChild } from \"./store/dashboardFetches\";\nimport { createStore } from 'redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet global = \"Global\";\nlet europe = \"Europe\";\nlet allOfUk = \"UK\";\nlet activateCites = false;\n\nfunction Regions(props, regionID) {\n  _s();\n\n  let dispatch = useDispatch();\n  let dataExist = false; // State management\n\n  const [getPreviouslySelected, setPreviouslySelected] = useState();\n  const [getSelectedTxt, setSelectedTxt] = useState();\n  let allRegions = JSON.parse(window.localStorage.getItem(\"regions\"));\n  console.log(\"allRegions\", allRegions); // Scotland\n\n  let scotLandLeftCol = [];\n  let scotLandRightCol = [];\n  let regionsLeftCol = [];\n  let regionsRightCol = []; // Use the top region data to create the first three buttons - UK, Europe and Global\n\n  let topRegions = useSelector(state => state.dashboard.top3Regions);\n\n  if (topRegions.length > 1) {\n    global = topRegions[0].Name;\n    europe = topRegions[1].Name;\n    allOfUk = topRegions[2].Name;\n  }\n\n  let createColumns2 = (data, leftCol, rightCol) => {\n    for (const [index, value] of data.entries()) {\n      if ((index + 1) % 2 !== 0) {\n        leftCol.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            paddingLeft: \"20px\",\n            paddingTop: \"16px\",\n            paddingBottom: \"12px\",\n            marginTop: \"12px\",\n            borderRadius: \"12px\",\n            backgroundColor: peerformanceBlueButton\n          },\n          id: value.ID,\n          \"data-leve\": value.Level,\n          \"data-parendId\": value.ParentID,\n          \"data-name\": value.Name,\n          \"data-RegionTypesId\": value.RegionTypesID,\n          onClick: listClicked,\n          children: value.Name\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this));\n      } else {\n        rightCol.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            paddingLeft: \"20px\",\n            paddingTop: \"16px\",\n            paddingBottom: \"12px\",\n            marginTop: \"12px\",\n            borderRadius: \"12px\",\n            backgroundColor: peerformanceBlueButton\n          },\n          id: value.ID,\n          \"data-leve\": value.Level,\n          \"data-parendId\": value.ParentID,\n          \"data-name\": value.Name,\n          \"data-RegionTypesId\": value.RegionTypesID,\n          id: value.ID,\n          onClick: listClicked,\n          children: value.Name\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this));\n      }\n    }\n  };\n\n  let [getSelectedRegionID, setSelectedRegionID] = useState();\n  let previouslySelected = [];\n\n  let listClicked = e => {\n    sessionStorage.setItem(\"regionId\", e.target.id); // setting the region id on session storage\n\n    setSelectedTxt(e.target.getAttribute(\"data-name\"));\n    setSelectedRegionID(e.target.id);\n    let current = getPreviouslySelected;\n\n    if (current == null || current === \"undefined\") {\n      setPreviouslySelected(e.target.id);\n    }\n\n    let selectedRegionId = e.target.id;\n\n    if (current !== null || current !== selectedRegionId) {\n      document.getElementById(selectedRegionId).style.color = peerformanceBlueText;\n      document.getElementById(selectedRegionId).style.backgroundColor = peerformanceGreen;\n\n      if (current > 0) {\n        document.getElementById(current).style.color = \"white\";\n        document.getElementById(current).style.backgroundColor = peerformanceBlueButton;\n      }\n\n      setPreviouslySelected(e.target.id);\n    } else {\n      alert(\"Contact the admin if you see this: Region page Error! \");\n      setPreviouslySelected(e.target.id);\n    }\n\n    let selectedTxt = e.target.innerText;\n    console.log(\"previouslySelected\", previouslySelected);\n\n    if (selectedTxt === 'Global') {\n      window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n      document.getElementById(\"citesDiv\").style.display = \"none\";\n      document.getElementById(\"regionsDiv\").style.display = \"none\";\n    }\n\n    if (selectedTxt === 'Europe') {\n      window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n      document.getElementById(\"citesDiv\").style.display = \"none\";\n      document.getElementById(\"regionsDiv\").style.display = \"none\";\n    }\n\n    for (let i = 0; i < towns_cities_Scotland.length; i++) {\n      if (selectedTxt === towns_cities_Scotland[i]) {\n        window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n      }\n    }\n\n    if (selectedTxt === 'UK') {\n      activateCites = true;\n      dispatch(getRegionChildren(selectedRegionId));\n      document.getElementById(\"regionsDiv\").style.display = \"inline\";\n      document.getElementById(\"citesDiv\").style.display = \"none\";\n    }\n\n    if (selectedTxt === 'Scotland' || selectedTxt === \"Greater London\") {\n      dispatch(getCityChildren(selectedRegionId));\n      document.getElementById(\"citesDiv\").style.display = \"inline\";\n    }\n\n    for (let i = 0; i < regions.length; i++) {\n      if (selectedTxt === regions[i]) {\n        document.getElementById(\"citesDiv\").style.display = \"inline\";\n        window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n      }\n    }\n\n    window.localStorage.setItem(\"selectedRegionId\", selectedRegionId);\n  };\n\n  let confirmSelection = () => {\n    sessionStorage.setItem(\"regionId\", getSelectedRegionID); // Send and update the region id on the database\n\n    dispatch(updateLastRegion(getSelectedRegionID));\n    dispatch(getRegionById(getSelectedRegionID));\n    sessionStorage.setItem(\"regionName\", getSelectedTxt);\n    sessionStorage.getItem(\"regionName\");\n    window.location.reload();\n  };\n\n  const regions = useSelector(state => {\n    return state.dashboard.regionChildren;\n  });\n  createColumns2(regions, regionsLeftCol, regionsRightCol);\n  const towns_cities_Scotland = useSelector(state => {\n    return state.dashboard.citesChildren;\n  });\n\n  if (activateCites === true) {\n    createColumns2(towns_cities_Scotland, scotLandLeftCol, scotLandRightCol);\n  }\n  /* Regions end*/\n\n\n  return /*#__PURE__*/_jsxDEV(Modal, { ...props,\n    size: \"lg\",\n    \"aria-labelledby\": \"contained-modal-title-vcenter\",\n    centered: true,\n    style: {\n      paddingTop: \"10px\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-lg\",\n      style: {\n        backgroundColor: peerformanceDarkBlue,\n        color: \"white\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: \"col-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            overflow: \"hidden\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            style: {\n              float: \"left\"\n            },\n            onClick: props.onHide,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: arrowLeft,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 76\n            }, this), \" \\xA0 \\xA0 Change peer group \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            style: {\n              float: \"right\"\n            },\n            onClick: props.onHide,\n            children: \" X \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm card\",\n                style: {\n                  backgroundColor: \"initial\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"btn-group me-8\",\n                  role: \"group\",\n                  \"aria-label\": \"First group\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn shadow-none\",\n                    id: \"3\",\n                    onClick: listClicked,\n                    style: {\n                      color: \"white\",\n                      backgroundColor: peerformanceBlueButton,\n                      paddingLeft: \"30px\",\n                      paddingRight: \"30px\"\n                    },\n                    \"data-name\": \"UK\",\n                    children: allOfUk\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-1\",\n                style: {\n                  width: \"4%\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm card\",\n                style: {\n                  backgroundColor: \"initial\"\n                },\n                id: \"keyWordSearchDiv\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"btn-group\",\n                  role: \"group\",\n                  \"aria-label\": \"Second group\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn shadow-none\",\n                    id: \"2\",\n                    onClick: listClicked,\n                    style: {\n                      color: \"white\",\n                      backgroundColor: peerformanceBlueButton,\n                      paddingLeft: \"30px\",\n                      paddingRight: \"30px\"\n                    },\n                    \"data-name\": \"Europe\",\n                    children: europe\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-1\",\n                style: {\n                  width: \"4%\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm card\",\n                style: {\n                  backgroundColor: \"initial\"\n                },\n                id: \"quickLinksDiv\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"btn-group\",\n                  role: \"group\",\n                  \"aria-label\": \"Third group\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn shadow-none\",\n                    id: \"1\",\n                    onClick: listClicked,\n                    style: {\n                      color: \"white\",\n                      backgroundColor: peerformanceBlueButton,\n                      paddingLeft: \"30px\",\n                      paddingRight: \"30px\"\n                    },\n                    \"data-name\": \"Global\",\n                    children: global\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: peerformanceBackground2,\n              paddingLeft: \"10px\",\n              paddingRight: \"20px\",\n              paddingTop: \"0px\",\n              paddingBottom: \"20px\",\n              borderRadius: \"10px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container container-fluid overflow-auto\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    height: \"20px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"container container-fluid overflow-auto\",\n                  style: {\n                    height: \"530px\",\n                    overflowY: \"scroll\",\n                    overflow: \"scroll\",\n                    scrollBehavior: \"smooth\",\n                    scrollbarColor: \"green\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    id: \"regionsDiv\",\n                    style: {\n                      display: \"none\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        fontSize: \"18px\"\n                      },\n                      children: \"Regions\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Row, {\n                      children: [/*#__PURE__*/_jsxDEV(Col, {\n                        children: regionsLeftCol\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 320,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Col, {\n                        children: regionsRightCol\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 321,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 319,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    id: \"citesDiv\",\n                    style: {\n                      display: \"none\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        fontSize: \"18px\"\n                      },\n                      children: \"Cites\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Row, {\n                      children: [/*#__PURE__*/_jsxDEV(Col, {\n                        children: scotLandLeftCol\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 329,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Col, {\n                        children: scotLandRightCol\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 330,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 328,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 326,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"float-end\",\n                  children: [\" Your selected location is: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                    id: \"yourSelectedRegion\",\n                    style: {\n                      color: peerformanceGreen\n                    },\n                    children: getSelectedTxt\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 90\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-success float-end\",\n            style: {\n              margin: \"10px\"\n            },\n            onClick: confirmSelection,\n            children: \" Confirm Selection\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Regions, \"Vn16hBxHosl78iT/QYth/qlAtno=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = Regions;\nexport default Regions;\n\nvar _c;\n\n$RefreshReg$(_c, \"Regions\");","map":{"version":3,"sources":["/home/mspl/Desktop/peerformance_frontend/src/Regions.js"],"names":["React","useRef","useState","Col","Modal","Row","peerformanceBackground2","peerformanceBlueButton","peerformanceBlueText","peerformanceDarkBlue","peerformanceGreen","peerformanceListItem","useDispatch","useSelector","getCityChildren","getRegionById","getRegionChildren","updateLastRegion","fetchRegionChild","createStore","global","europe","allOfUk","activateCites","Regions","props","regionID","dispatch","dataExist","getPreviouslySelected","setPreviouslySelected","getSelectedTxt","setSelectedTxt","allRegions","JSON","parse","window","localStorage","getItem","console","log","scotLandLeftCol","scotLandRightCol","regionsLeftCol","regionsRightCol","topRegions","state","dashboard","top3Regions","length","Name","createColumns2","data","leftCol","rightCol","index","value","entries","push","paddingLeft","paddingTop","paddingBottom","marginTop","borderRadius","backgroundColor","ID","Level","ParentID","RegionTypesID","listClicked","getSelectedRegionID","setSelectedRegionID","previouslySelected","e","sessionStorage","setItem","target","id","getAttribute","current","selectedRegionId","document","getElementById","style","color","alert","selectedTxt","innerText","display","i","towns_cities_Scotland","regions","confirmSelection","location","reload","regionChildren","citesChildren","overflow","float","onHide","arrowLeft","paddingRight","width","height","overflowY","scrollBehavior","scrollbarColor","fontSize","margin"],"mappings":";;;AAAA;AAEA,OAAOA,KAAP,IAAeC,MAAf,EAAuBC,QAAvB,QAAsC,OAAtC;AACA,SAAQC,GAAR,EAAaC,KAAb,EAAoBC,GAApB,QAA8B,iBAA9B;AACA,SACIC,uBADJ,EAEIC,sBAFJ,EAGIC,oBAHJ,EAIIC,oBAJJ,EAKIC,iBALJ,EAKuBC,oBALvB,QAMO,WANP;;AAQA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,eAAR,EAAyBC,aAAzB,EAAwCC,iBAAxC,EAA2DC,gBAA3D,QAAkF,0BAAlF;AACA,SAAQC,gBAAR,QAA+B,0BAA/B;AACA,SAAQC,WAAR,QAA0B,OAA1B;;AAGA,IAAIC,MAAM,GAAG,QAAb;AACA,IAAIC,MAAM,GAAG,QAAb;AACA,IAAIC,OAAO,GAAG,IAAd;AACA,IAAIC,aAAa,GAAG,KAApB;;AAEA,SAASC,OAAT,CAAiBC,KAAjB,EAAwBC,QAAxB,EAAkC;AAAA;;AAE9B,MAAIC,QAAQ,GAAGf,WAAW,EAA1B;AAEA,MAAIgB,SAAS,GAAG,KAAhB,CAJ8B,CAM9B;;AACA,QAAM,CAACC,qBAAD,EAAwBC,qBAAxB,IAAiD5B,QAAQ,EAA/D;AACA,QAAM,CAAC6B,cAAD,EAAiBC,cAAjB,IAAmC9B,QAAQ,EAAjD;AAGA,MAAI+B,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,CAAX,CAAjB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BP,UAA1B,EAZ8B,CAe9B;;AACA,MAAIQ,eAAe,GAAG,EAAtB;AACA,MAAIC,gBAAgB,GAAG,EAAvB;AAEA,MAAIC,cAAc,GAAG,EAArB;AACA,MAAIC,eAAe,GAAG,EAAtB,CApB8B,CAsB9B;;AACA,MAAIC,UAAU,GAAGhC,WAAW,CAACiC,KAAK,IAAIA,KAAK,CAACC,SAAN,CAAgBC,WAA1B,CAA5B;;AAEA,MAAIH,UAAU,CAACI,MAAX,GAAoB,CAAxB,EAA2B;AACvB7B,IAAAA,MAAM,GAAGyB,UAAU,CAAC,CAAD,CAAV,CAAcK,IAAvB;AACA7B,IAAAA,MAAM,GAAGwB,UAAU,CAAC,CAAD,CAAV,CAAcK,IAAvB;AACA5B,IAAAA,OAAO,GAAGuB,UAAU,CAAC,CAAD,CAAV,CAAcK,IAAxB;AACH;;AAED,MAAIC,cAAc,GAAG,CAACC,IAAD,EAAOC,OAAP,EAAgBC,QAAhB,KAA6B;AAE9C,SAAK,MAAM,CAACC,KAAD,EAAQC,KAAR,CAAX,IAA6BJ,IAAI,CAACK,OAAL,EAA7B,EAA6C;AACzC,UAAI,CAACF,KAAK,GAAG,CAAT,IAAc,CAAd,KAAoB,CAAxB,EAA2B;AACvBF,QAAAA,OAAO,CAACK,IAAR,eACI;AAEI,UAAA,KAAK,EAAE;AACHC,YAAAA,WAAW,EAAE,MADV;AAEHC,YAAAA,UAAU,EAAE,MAFT;AAGHC,YAAAA,aAAa,EAAE,MAHZ;AAIHC,YAAAA,SAAS,EAAE,MAJR;AAKHC,YAAAA,YAAY,EAAE,MALX;AAMHC,YAAAA,eAAe,EAAEzD;AANd,WAFX;AAUI,UAAA,EAAE,EAAEiD,KAAK,CAACS,EAVd;AAWI,uBAAWT,KAAK,CAACU,KAXrB;AAYI,2BAAeV,KAAK,CAACW,QAZzB;AAaI,uBAAWX,KAAK,CAACN,IAbrB;AAcI,gCAAoBM,KAAK,CAACY,aAd9B;AAeI,UAAA,OAAO,EAAEC,WAfb;AAAA,oBAiBKb,KAAK,CAACN;AAjBX,WACSK,KADT;AAAA;AAAA;AAAA;AAAA,gBADJ;AAqBH,OAtBD,MAsBO;AACHD,QAAAA,QAAQ,CAACI,IAAT,eACI;AAEI,UAAA,KAAK,EAAE;AACHC,YAAAA,WAAW,EAAE,MADV;AAEHC,YAAAA,UAAU,EAAE,MAFT;AAGHC,YAAAA,aAAa,EAAE,MAHZ;AAIHC,YAAAA,SAAS,EAAE,MAJR;AAKHC,YAAAA,YAAY,EAAE,MALX;AAMHC,YAAAA,eAAe,EAAEzD;AANd,WAFX;AAUI,UAAA,EAAE,EAAEiD,KAAK,CAACS,EAVd;AAWI,uBAAWT,KAAK,CAACU,KAXrB;AAYI,2BAAeV,KAAK,CAACW,QAZzB;AAaI,uBAAWX,KAAK,CAACN,IAbrB;AAcI,gCAAoBM,KAAK,CAACY,aAd9B;AAeI,UAAA,EAAE,EAAEZ,KAAK,CAACS,EAfd;AAgBI,UAAA,OAAO,EAAEI,WAhBb;AAAA,oBAkBKb,KAAK,CAACN;AAlBX,WACSK,KADT;AAAA;AAAA;AAAA;AAAA,gBADJ;AAqBH;AACJ;AACJ,GAjDD;;AAmDA,MAAI,CAACe,mBAAD,EAAsBC,mBAAtB,IAA6CrE,QAAQ,EAAzD;AACA,MAAIsE,kBAAkB,GAAG,EAAzB;;AACA,MAAIH,WAAW,GAAII,CAAD,IAAO;AACrBC,IAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCF,CAAC,CAACG,MAAF,CAASC,EAA5C,EADqB,CAC4B;;AACjD7C,IAAAA,cAAc,CAACyC,CAAC,CAACG,MAAF,CAASE,YAAT,CAAsB,WAAtB,CAAD,CAAd;AACAP,IAAAA,mBAAmB,CAACE,CAAC,CAACG,MAAF,CAASC,EAAV,CAAnB;AACA,QAAIE,OAAO,GAAGlD,qBAAd;;AAEA,QAAIkD,OAAO,IAAI,IAAX,IAAmBA,OAAO,KAAK,WAAnC,EAAgD;AAC5CjD,MAAAA,qBAAqB,CAAC2C,CAAC,CAACG,MAAF,CAASC,EAAV,CAArB;AACH;;AAED,QAAIG,gBAAgB,GAAGP,CAAC,CAACG,MAAF,CAASC,EAAhC;;AAEA,QAAIE,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAKC,gBAApC,EAAsD;AAClDC,MAAAA,QAAQ,CAACC,cAAT,CAAwBF,gBAAxB,EAA0CG,KAA1C,CAAgDC,KAAhD,GAAwD5E,oBAAxD;AACAyE,MAAAA,QAAQ,CAACC,cAAT,CAAwBF,gBAAxB,EAA0CG,KAA1C,CAAgDnB,eAAhD,GAAkEtD,iBAAlE;;AACA,UAAIqE,OAAO,GAAG,CAAd,EAAiB;AACbE,QAAAA,QAAQ,CAACC,cAAT,CAAwBH,OAAxB,EAAiCI,KAAjC,CAAuCC,KAAvC,GAA+C,OAA/C;AACAH,QAAAA,QAAQ,CAACC,cAAT,CAAwBH,OAAxB,EAAiCI,KAAjC,CAAuCnB,eAAvC,GAAyDzD,sBAAzD;AACH;;AACDuB,MAAAA,qBAAqB,CAAC2C,CAAC,CAACG,MAAF,CAASC,EAAV,CAArB;AAEH,KATD,MASO;AACHQ,MAAAA,KAAK,CAAC,wDAAD,CAAL;AACAvD,MAAAA,qBAAqB,CAAC2C,CAAC,CAACG,MAAF,CAASC,EAAV,CAArB;AACH;;AAED,QAAIS,WAAW,GAAGb,CAAC,CAACG,MAAF,CAASW,SAA3B;AACAhD,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCgC,kBAAlC;;AAEA,QAAIc,WAAW,KAAK,QAApB,EAA8B;AAC1BlD,MAAAA,MAAM,CAACC,YAAP,CAAoBsC,OAApB,CAA4B,gBAA5B,EAA8CW,WAA9C;AACAL,MAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CK,OAA1C,GAAoD,MAApD;AACAP,MAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CK,OAA5C,GAAsD,MAAtD;AACH;;AACD,QAAIF,WAAW,KAAK,QAApB,EAA8B;AAC1BlD,MAAAA,MAAM,CAACC,YAAP,CAAoBsC,OAApB,CAA4B,gBAA5B,EAA8CW,WAA9C;AACAL,MAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CK,OAA1C,GAAoD,MAApD;AACAP,MAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CK,OAA5C,GAAsD,MAAtD;AACH;;AAED,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,qBAAqB,CAACzC,MAA1C,EAAkDwC,CAAC,EAAnD,EAAuD;AACnD,UAAIH,WAAW,KAAKI,qBAAqB,CAACD,CAAD,CAAzC,EAA8C;AAC1CrD,QAAAA,MAAM,CAACC,YAAP,CAAoBsC,OAApB,CAA4B,gBAA5B,EAA8CW,WAA9C;AACH;AACJ;;AAED,QAAIA,WAAW,KAAK,IAApB,EAA0B;AACtB/D,MAAAA,aAAa,GAAG,IAAhB;AAEAI,MAAAA,QAAQ,CAACX,iBAAiB,CAACgE,gBAAD,CAAlB,CAAR;AACAC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CK,OAA5C,GAAsD,QAAtD;AACAP,MAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CK,OAA1C,GAAoD,MAApD;AACH;;AAED,QAAIF,WAAW,KAAK,UAAhB,IAA8BA,WAAW,KAAK,gBAAlD,EAAoE;AAChE3D,MAAAA,QAAQ,CAACb,eAAe,CAACkE,gBAAD,CAAhB,CAAR;AACAC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CK,OAA1C,GAAoD,QAApD;AACH;;AAGD,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,OAAO,CAAC1C,MAA5B,EAAoCwC,CAAC,EAArC,EAAyC;AACrC,UAAIH,WAAW,KAAKK,OAAO,CAACF,CAAD,CAA3B,EAAgC;AAC5BR,QAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CK,OAA1C,GAAoD,QAApD;AACApD,QAAAA,MAAM,CAACC,YAAP,CAAoBsC,OAApB,CAA4B,gBAA5B,EAA8CW,WAA9C;AACH;AACJ;;AAEDlD,IAAAA,MAAM,CAACC,YAAP,CAAoBsC,OAApB,CAA4B,kBAA5B,EAAgDK,gBAAhD;AACH,GApED;;AAsEA,MAAIY,gBAAgB,GAAG,MAAM;AACzBlB,IAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCL,mBAAnC,EADyB,CAEzB;;AACA3C,IAAAA,QAAQ,CAACV,gBAAgB,CAACqD,mBAAD,CAAjB,CAAR;AACA3C,IAAAA,QAAQ,CAACZ,aAAa,CAACuD,mBAAD,CAAd,CAAR;AAEAI,IAAAA,cAAc,CAACC,OAAf,CAAuB,YAAvB,EAAqC5C,cAArC;AACA2C,IAAAA,cAAc,CAACpC,OAAf,CAAuB,YAAvB;AAEAF,IAAAA,MAAM,CAACyD,QAAP,CAAgBC,MAAhB;AACH,GAVD;;AAaA,QAAMH,OAAO,GAAG9E,WAAW,CAACiC,KAAK,IAAI;AACjC,WAAOA,KAAK,CAACC,SAAN,CAAgBgD,cAAvB;AACH,GAF0B,CAA3B;AAGA5C,EAAAA,cAAc,CAACwC,OAAD,EAAUhD,cAAV,EAA0BC,eAA1B,CAAd;AAGA,QAAM8C,qBAAqB,GAAG7E,WAAW,CAACiC,KAAK,IAAI;AAC/C,WAAOA,KAAK,CAACC,SAAN,CAAgBiD,aAAvB;AACH,GAFwC,CAAzC;;AAIA,MAAIzE,aAAa,KAAK,IAAtB,EAA4B;AACxB4B,IAAAA,cAAc,CAACuC,qBAAD,EAAwBjD,eAAxB,EAAyCC,gBAAzC,CAAd;AACH;AAED;;;AACA,sBACI,QAAC,KAAD,OACQjB,KADR;AAEI,IAAA,IAAI,EAAC,IAFT;AAGI,uBAAgB,+BAHpB;AAII,IAAA,QAAQ,MAJZ;AAKI,IAAA,KAAK,EAAE;AAACmC,MAAAA,UAAU,EAAE;AAAb,KALX;AAAA,2BAQI;AAAK,MAAA,SAAS,EAAC,cAAf;AAA8B,MAAA,KAAK,EAAE;AACjCI,QAAAA,eAAe,EAAEvD,oBADgB;AAEjC2E,QAAAA,KAAK,EAAE;AAF0B,OAArC;AAAA,8BAII;AAAA;AAAA;AAAA;AAAA,cAJJ,eAKI,QAAC,KAAD,CAAO,IAAP;AAAY,QAAA,SAAS,EAAC,QAAtB;AAAA,gCAEI;AAAK,UAAA,KAAK,EAAE;AAACa,YAAAA,QAAQ,EAAE;AAAX,WAAZ;AAAA,kCACI;AAAI,YAAA,KAAK,EAAE;AAACC,cAAAA,KAAK,EAAE;AAAR,aAAX;AAA4B,YAAA,OAAO,EAAEzE,KAAK,CAAC0E,MAA3C;AAAA,oCAAmD;AAAK,cAAA,GAAG,EAAEC,SAAV;AAAqB,cAAA,GAAG,EAAC;AAAzB;AAAA;AAAA;AAAA;AAAA,oBAAnD;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAGI;AAAI,YAAA,KAAK,EAAE;AAACF,cAAAA,KAAK,EAAE;AAAR,aAAX;AAA6B,YAAA,OAAO,EAAEzE,KAAK,CAAC0E,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAOI;AAAA;AAAA;AAAA;AAAA,gBAPJ,eAUI;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,iCAEI;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,mCACI;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,sCACI;AAAK,gBAAA,SAAS,EAAC,aAAf;AAA6B,gBAAA,KAAK,EAAE;AAACnC,kBAAAA,eAAe,EAAE;AAAlB,iBAApC;AAAA,uCACI;AAAK,kBAAA,SAAS,EAAC,gBAAf;AAAgC,kBAAA,IAAI,EAAC,OAArC;AAA6C,gCAAW,aAAxD;AAAA,yCAEI;AAAQ,oBAAA,IAAI,EAAC,QAAb;AAAsB,oBAAA,SAAS,EAAC,iBAAhC;AAAkD,oBAAA,EAAE,EAAC,GAArD;AACQ,oBAAA,OAAO,EAAEK,WADjB;AAEQ,oBAAA,KAAK,EAAE;AACHe,sBAAAA,KAAK,EAAE,OADJ;AAEHpB,sBAAAA,eAAe,EAAEzD,sBAFd;AAGHoD,sBAAAA,WAAW,EAAE,MAHV;AAIH0C,sBAAAA,YAAY,EAAE;AAJX,qBAFf;AAQQ,iCAAU,IARlB;AAAA,8BASK/E;AATL;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBADJ,eAmBI;AAAK,gBAAA,SAAS,EAAC,UAAf;AAA0B,gBAAA,KAAK,EAAE;AAACgF,kBAAAA,KAAK,EAAE;AAAR;AAAjC;AAAA;AAAA;AAAA;AAAA,sBAnBJ,eAoBI;AAAK,gBAAA,SAAS,EAAC,aAAf;AAA6B,gBAAA,KAAK,EAAE;AAACtC,kBAAAA,eAAe,EAAE;AAAlB,iBAApC;AACK,gBAAA,EAAE,EAAE,kBADT;AAAA,uCAEI;AAAK,kBAAA,SAAS,EAAC,WAAf;AAA2B,kBAAA,IAAI,EAAC,OAAhC;AAAwC,gCAAW,cAAnD;AAAA,yCAEI;AAAQ,oBAAA,IAAI,EAAC,QAAb;AAAsB,oBAAA,SAAS,EAAC,iBAAhC;AAAkD,oBAAA,EAAE,EAAC,GAArD;AACQ,oBAAA,OAAO,EAAEK,WADjB;AAEQ,oBAAA,KAAK,EAAE;AACHe,sBAAAA,KAAK,EAAE,OADJ;AAEHpB,sBAAAA,eAAe,EAAEzD,sBAFd;AAGHoD,sBAAAA,WAAW,EAAE,MAHV;AAIH0C,sBAAAA,YAAY,EAAE;AAJX,qBAFf;AAQQ,iCAAU,QARlB;AAAA,8BASEhF;AATF;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,sBApBJ,eAqCI;AAAK,gBAAA,SAAS,EAAC,UAAf;AAA0B,gBAAA,KAAK,EAAE;AAACiF,kBAAAA,KAAK,EAAE;AAAR;AAAjC;AAAA;AAAA;AAAA;AAAA,sBArCJ,eAuCI;AAAK,gBAAA,SAAS,EAAC,aAAf;AAA6B,gBAAA,KAAK,EAAE;AAACtC,kBAAAA,eAAe,EAAE;AAAlB,iBAApC;AACK,gBAAA,EAAE,EAAE,eADT;AAAA,uCAEI;AAAK,kBAAA,SAAS,EAAC,WAAf;AAA2B,kBAAA,IAAI,EAAC,OAAhC;AAAwC,gCAAW,aAAnD;AAAA,yCAEI;AAAQ,oBAAA,IAAI,EAAC,QAAb;AAAsB,oBAAA,SAAS,EAAC,iBAAhC;AAAkD,oBAAA,EAAE,EAAC,GAArD;AACQ,oBAAA,OAAO,EAAEK,WADjB;AAEQ,oBAAA,KAAK,EAAE;AACHe,sBAAAA,KAAK,EAAE,OADJ;AAEHpB,sBAAAA,eAAe,EAAEzD,sBAFd;AAGHoD,sBAAAA,WAAW,EAAE,MAHV;AAIH0C,sBAAAA,YAAY,EAAE;AAJX,qBAFf;AAQQ,iCAAU,QARlB;AAAA,8BASEjF;AATF;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,sBAvCJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,gBAVJ,eAwEI;AAAA;AAAA;AAAA;AAAA,gBAxEJ,eA0EI;AAAA,kCACI;AAAK,YAAA,KAAK,EAAE;AACR4C,cAAAA,eAAe,EAAE1D,uBADT;AAERqD,cAAAA,WAAW,EAAE,MAFL;AAGR0C,cAAAA,YAAY,EAAE,MAHN;AAIRzC,cAAAA,UAAU,EAAE,KAJJ;AAKRC,cAAAA,aAAa,EAAE,MALP;AAMRE,cAAAA,YAAY,EAAE;AANN,aAAZ;AAAA,mCASI;AAAA,sCACI;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAK,gBAAA,SAAS,EAAC,yCAAf;AAAA,wCAEI;AAAK,kBAAA,KAAK,EAAE;AAACwC,oBAAAA,MAAM,EAAE;AAAT;AAAZ;AAAA;AAAA;AAAA;AAAA,wBAFJ,eAII;AAAK,kBAAA,SAAS,EAAC,yCAAf;AAAyD,kBAAA,KAAK,EAAE;AAC5DA,oBAAAA,MAAM,EAAE,OADoD;AAE5DC,oBAAAA,SAAS,EAAE,QAFiD;AAG5DP,oBAAAA,QAAQ,EAAE,QAHkD;AAI5DQ,oBAAAA,cAAc,EAAE,QAJ4C;AAK5DC,oBAAAA,cAAc,EAAE;AAL4C,mBAAhE;AAAA,0CAOI;AAAK,oBAAA,EAAE,EAAE,YAAT;AAAuB,oBAAA,KAAK,EAAE;AAAClB,sBAAAA,OAAO,EAAE;AAAV,qBAA9B;AAAA,4CACI;AAAG,sBAAA,KAAK,EAAE;AAACmB,wBAAAA,QAAQ,EAAE;AAAX,uBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eAEI,QAAC,GAAD;AAAA,8CACI,QAAC,GAAD;AAAA,kCAAMhE;AAAN;AAAA;AAAA;AAAA;AAAA,8BADJ,eAEI,QAAC,GAAD;AAAA,kCAAMC;AAAN;AAAA;AAAA;AAAA;AAAA,8BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPJ,eAcI;AAAA;AAAA;AAAA;AAAA,0BAdJ,eAgBI;AAAK,oBAAA,EAAE,EAAE,UAAT;AAAqB,oBAAA,KAAK,EAAE;AAAC4C,sBAAAA,OAAO,EAAE;AAAV,qBAA5B;AAAA,4CACI;AAAG,sBAAA,KAAK,EAAE;AAACmB,wBAAAA,QAAQ,EAAE;AAAX,uBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eAEI,QAAC,GAAD;AAAA,8CACI,QAAC,GAAD;AAAA,kCAAMlE;AAAN;AAAA;AAAA;AAAA;AAAA,8BADJ,eAEI,QAAC,GAAD;AAAA,kCAAMC;AAAN;AAAA;AAAA;AAAA;AAAA,8BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJJ,eA4BI;AAAG,kBAAA,SAAS,EAAC,WAAb;AAAA,0EAAqD;AAAG,oBAAA,EAAE,EAAC,oBAAN;AACjD,oBAAA,KAAK,EAAE;AAAC0C,sBAAAA,KAAK,EAAE1E;AAAR,qBAD0C;AAAA,8BACbqB;AADa;AAAA;AAAA;AAAA;AAAA,0BAArD;AAAA;AAAA;AAAA;AAAA;AAAA,wBA5BJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AATJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eA6CI;AAAQ,YAAA,SAAS,EAAC,mCAAlB;AACQ,YAAA,KAAK,EAAE;AAAC6E,cAAAA,MAAM,EAAE;AAAT,aADf;AAEQ,YAAA,OAAO,EAAEhB,gBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA7CJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1EJ;AAAA;AAAA;AAAA;AAAA;AAAA,cALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AARJ;AAAA;AAAA;AAAA;AAAA,UADJ;AA+IH;;GArUQpE,O;UAEUZ,W,EAqBEC,W,EAgJDA,W,EAMcA,W;;;KA7KzBW,O;AAuUT,eAAeA,OAAf","sourcesContent":["/* Regions start */\n\nimport React, {useRef, useState} from \"react\";\nimport {Col, Modal, Row} from \"react-bootstrap\";\nimport {\n    peerformanceBackground2,\n    peerformanceBlueButton,\n    peerformanceBlueText,\n    peerformanceDarkBlue,\n    peerformanceGreen, peerformanceListItem\n} from \"./colours\";\nimport arrowLeft from \"./Styleguide/arrow_left.svg\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getCityChildren, getRegionById, getRegionChildren, updateLastRegion} from \"./store/dashboardActions\";\nimport {fetchRegionChild} from \"./store/dashboardFetches\";\nimport {createStore} from 'redux'\n\n\nlet global = \"Global\";\nlet europe = \"Europe\";\nlet allOfUk = \"UK\";\nlet activateCites = false;\n\nfunction Regions(props, regionID) {\n\n    let dispatch = useDispatch();\n\n    let dataExist = false;\n\n    // State management\n    const [getPreviouslySelected, setPreviouslySelected] = useState();\n    const [getSelectedTxt, setSelectedTxt] = useState();\n\n\n    let allRegions = JSON.parse(window.localStorage.getItem(\"regions\"));\n    console.log(\"allRegions\", allRegions);\n\n\n    // Scotland\n    let scotLandLeftCol = []\n    let scotLandRightCol = []\n\n    let regionsLeftCol = []\n    let regionsRightCol = []\n\n    // Use the top region data to create the first three buttons - UK, Europe and Global\n    let topRegions = useSelector(state => state.dashboard.top3Regions);\n\n    if (topRegions.length > 1) {\n        global = topRegions[0].Name;\n        europe = topRegions[1].Name;\n        allOfUk = topRegions[2].Name;\n    }\n\n    let createColumns2 = (data, leftCol, rightCol) => {\n\n        for (const [index, value] of data.entries()) {\n            if ((index + 1) % 2 !== 0) {\n                leftCol.push(\n                    <div\n                        key={index}\n                        style={{\n                            paddingLeft: \"20px\",\n                            paddingTop: \"16px\",\n                            paddingBottom: \"12px\",\n                            marginTop: \"12px\",\n                            borderRadius: \"12px\",\n                            backgroundColor: peerformanceBlueButton\n                        }}\n                        id={value.ID}\n                        data-leve={value.Level}\n                        data-parendId={value.ParentID}\n                        data-name={value.Name}\n                        data-RegionTypesId={value.RegionTypesID}\n                        onClick={listClicked}\n                    >\n                        {value.Name}\n                    </div>)\n\n            } else {\n                rightCol.push(\n                    <div\n                        key={index}\n                        style={{\n                            paddingLeft: \"20px\",\n                            paddingTop: \"16px\",\n                            paddingBottom: \"12px\",\n                            marginTop: \"12px\",\n                            borderRadius: \"12px\",\n                            backgroundColor: peerformanceBlueButton,\n                        }}\n                        id={value.ID}\n                        data-leve={value.Level}\n                        data-parendId={value.ParentID}\n                        data-name={value.Name}\n                        data-RegionTypesId={value.RegionTypesID}\n                        id={value.ID}\n                        onClick={listClicked}\n                    >\n                        {value.Name}\n                    </div>)\n            }\n        }\n    }\n\n    let [getSelectedRegionID, setSelectedRegionID] = useState();\n    let previouslySelected = [];\n    let listClicked = (e) => {\n        sessionStorage.setItem(\"regionId\", e.target.id); // setting the region id on session storage\n        setSelectedTxt(e.target.getAttribute(\"data-name\"))\n        setSelectedRegionID(e.target.id);\n        let current = getPreviouslySelected;\n\n        if (current == null || current === \"undefined\") {\n            setPreviouslySelected(e.target.id);\n        }\n\n        let selectedRegionId = e.target.id;\n\n        if (current !== null || current !== selectedRegionId) {\n            document.getElementById(selectedRegionId).style.color = peerformanceBlueText;\n            document.getElementById(selectedRegionId).style.backgroundColor = peerformanceGreen;\n            if (current > 0) {\n                document.getElementById(current).style.color = \"white\";\n                document.getElementById(current).style.backgroundColor = peerformanceBlueButton;\n            }\n            setPreviouslySelected(e.target.id);\n\n        } else {\n            alert(\"Contact the admin if you see this: Region page Error! \")\n            setPreviouslySelected(e.target.id);\n        }\n\n        let selectedTxt = e.target.innerText;\n        console.log(\"previouslySelected\", previouslySelected);\n\n        if (selectedTxt === 'Global') {\n            window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n            document.getElementById(\"citesDiv\").style.display = \"none\";\n            document.getElementById(\"regionsDiv\").style.display = \"none\";\n        }\n        if (selectedTxt === 'Europe') {\n            window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n            document.getElementById(\"citesDiv\").style.display = \"none\";\n            document.getElementById(\"regionsDiv\").style.display = \"none\";\n        }\n\n        for (let i = 0; i < towns_cities_Scotland.length; i++) {\n            if (selectedTxt === towns_cities_Scotland[i]) {\n                window.localStorage.setItem(\"selectedRegion\", selectedTxt)\n            }\n        }\n\n        if (selectedTxt === 'UK') {\n            activateCites = true;\n\n            dispatch(getRegionChildren(selectedRegionId))\n            document.getElementById(\"regionsDiv\").style.display = \"inline\";\n            document.getElementById(\"citesDiv\").style.display = \"none\";\n        }\n\n        if (selectedTxt === 'Scotland' || selectedTxt === \"Greater London\") {\n            dispatch(getCityChildren(selectedRegionId))\n            document.getElementById(\"citesDiv\").style.display = \"inline\";\n        }\n\n\n        for (let i = 0; i < regions.length; i++) {\n            if (selectedTxt === regions[i]) {\n                document.getElementById(\"citesDiv\").style.display = \"inline\";\n                window.localStorage.setItem(\"selectedRegion\", selectedTxt);\n            }\n        }\n\n        window.localStorage.setItem(\"selectedRegionId\", selectedRegionId);\n    }\n\n    let confirmSelection = () => {\n        sessionStorage.setItem(\"regionId\", getSelectedRegionID);\n        // Send and update the region id on the database\n        dispatch(updateLastRegion(getSelectedRegionID));\n        dispatch(getRegionById(getSelectedRegionID));\n\n        sessionStorage.setItem(\"regionName\", getSelectedTxt)\n        sessionStorage.getItem(\"regionName\")\n\n        window.location.reload();\n    }\n\n\n    const regions = useSelector(state => {\n        return state.dashboard.regionChildren;\n    });\n    createColumns2(regions, regionsLeftCol, regionsRightCol)\n\n\n    const towns_cities_Scotland = useSelector(state => {\n        return state.dashboard.citesChildren;\n    });\n\n    if (activateCites === true) {\n        createColumns2(towns_cities_Scotland, scotLandLeftCol, scotLandRightCol)\n    }\n\n    /* Regions end*/\n    return (\n        <Modal\n            {...props}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered\n            style={{paddingTop: \"10px\"}}\n        >\n\n            <div className=\"container-lg\" style={{\n                backgroundColor: peerformanceDarkBlue,\n                color: \"white\",\n            }}>\n                <p></p>\n                <Modal.Body className=\"col-sm\">\n\n                    <div style={{overflow: \"hidden\"}}>\n                        <h6 style={{float: \"left\"}} onClick={props.onHide}><img src={arrowLeft} alt=\"\"\n                        /> &nbsp; &nbsp; Change peer group </h6>\n                        <h6 style={{float: \"right\"}} onClick={props.onHide}> X </h6>\n                    </div>\n                    <p></p>\n\n\n                    <div className=\"text-center\">\n\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-sm card\" style={{backgroundColor: \"initial\"}}>\n                                    <div className=\"btn-group me-8\" role=\"group\" aria-label=\"First group\">\n                                        {/* we are setting the id of each button to match the sql regions table*/}\n                                        <button type=\"button\" className=\"btn shadow-none\" id=\"3\"\n                                                onClick={listClicked}\n                                                style={{\n                                                    color: \"white\",\n                                                    backgroundColor: peerformanceBlueButton,\n                                                    paddingLeft: \"30px\",\n                                                    paddingRight: \"30px\",\n                                                }}\n                                                data-name=\"UK\">\n                                            {allOfUk}\n                                        </button>\n\n                                    </div>\n                                </div>\n\n                                <div className=\"col-sm-1\" style={{width: \"4%\"}}></div>\n                                <div className=\"col-sm card\" style={{backgroundColor: \"initial\"}}\n                                     id={\"keyWordSearchDiv\"}>\n                                    <div className=\"btn-group\" role=\"group\" aria-label=\"Second group\"\n                                    >\n                                        <button type=\"button\" className=\"btn shadow-none\" id=\"2\"\n                                                onClick={listClicked}\n                                                style={{\n                                                    color: \"white\",\n                                                    backgroundColor: peerformanceBlueButton,\n                                                    paddingLeft: \"30px\",\n                                                    paddingRight: \"30px\",\n                                                }}\n                                                data-name=\"Europe\"\n                                        >{europe}\n                                        </button>\n                                    </div>\n                                </div>\n                                <div className=\"col-sm-1\" style={{width: \"4%\"}}></div>\n\n                                <div className=\"col-sm card\" style={{backgroundColor: \"initial\"}}\n                                     id={\"quickLinksDiv\"}>\n                                    <div className=\"btn-group\" role=\"group\" aria-label=\"Third group\"\n                                    >\n                                        <button type=\"button\" className=\"btn shadow-none\" id=\"1\"\n                                                onClick={listClicked}\n                                                style={{\n                                                    color: \"white\",\n                                                    backgroundColor: peerformanceBlueButton,\n                                                    paddingLeft: \"30px\",\n                                                    paddingRight: \"30px\",\n                                                }}\n                                                data-name=\"Global\"\n                                        >{global}\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <br/>\n\n                    <div>\n                        <div style={{\n                            backgroundColor: peerformanceBackground2,\n                            paddingLeft: \"10px\",\n                            paddingRight: \"20px\",\n                            paddingTop: \"0px\",\n                            paddingBottom: \"20px\",\n                            borderRadius: \"10px\",\n\n                        }}>\n                            <div>\n                                <div></div>\n                                <div className=\"container container-fluid overflow-auto\"\n                                >\n                                    <div style={{height: \"20px\"}}></div>\n\n                                    <div className=\"container container-fluid overflow-auto\" style={{\n                                        height: \"530px\",\n                                        overflowY: \"scroll\",\n                                        overflow: \"scroll\",\n                                        scrollBehavior: \"smooth\",\n                                        scrollbarColor: \"green\"\n                                    }}>\n                                        <div id={\"regionsDiv\"} style={{display: \"none\"}}>\n                                            <p style={{fontSize: \"18px\"}}>Regions</p>\n                                            <Row>\n                                                <Col>{regionsLeftCol}</Col>\n                                                <Col>{regionsRightCol}</Col>\n                                            </Row>\n                                        </div>\n                                        <br/>\n\n                                        <div id={\"citesDiv\"} style={{display: \"none\"}}>\n                                            <p style={{fontSize: \"18px\"}}>Cites</p>\n                                            <Row>\n                                                <Col>{scotLandLeftCol}</Col>\n                                                <Col>{scotLandRightCol}</Col>\n                                            </Row>\n                                        </div>\n                                    </div>\n                                    <p className=\"float-end\"> Your selected location is: <b id=\"yourSelectedRegion\"\n                                        style={{color: peerformanceGreen}}>{getSelectedTxt}</b></p>\n                                </div>\n                            </div>\n                        </div>\n                        <button className=\"btn btn-outline-success float-end\"\n                                style={{margin: \"10px\"}}\n                                onClick={confirmSelection}> Confirm Selection\n                        </button>\n                    </div>\n                </Modal.Body>\n            </div>\n\n        </Modal>\n    )\n}\n\nexport default Regions;"]},"metadata":{},"sourceType":"module"}