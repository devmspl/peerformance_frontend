{"ast":null,"code":"import _objectSpread from\"/home/mspl/Desktop/peerformance_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/mspl/Desktop/peerformance_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Navbar,Nav,NavDropdown,Button,FormControl,Form,Col,Container,Row,InputGroup}from'react-bootstrap';import React,{useState}from'react';import axios from'axios';import{setUserSession}from'./Utils/Common';import{decryptKeyCBC}from'./Utils/DecryptKeyCBC';import PeerformanceLogo from\"../src/assets/peerformance_logo.svg\";import greenTick from\"../src/Styleguide/icons/green_tick.svg\";import eye_off from\"../src/Styleguide/icons/eye_off.svg\";import eye_on from\"../src/Styleguide/icons/eye_on.svg\";import loadData from\"./Utils/category\";import CookieConsent from\"react-cookie-consent\";import{peerformanceBabyBlue,peerformanceDarkBlue}from\"./colours\";import range from\"./Utils/getParticipantRange\";import{fetchPeerGroup,fetchRegionById}from\"./store/dashboardFetches\";import{getRegionById}from\"./store/dashboardActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var username=useFormInput('');var password=useFormInput('');var categoryTime=localStorage.getItem('categoryTime');var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMsg=_useState4[0],setErrorMsg=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isRevealPwd=_useState6[0],setIsRevealPwd=_useState6[1];// handle button click of login form\nvar handleLogin=function handleLogin(){setLoading(true);axios.post('/login',{username:username.value,password:password.value,categoryTime:categoryTime}).then(function(response){// Create variable for all of the values that we have received\nvar token=response.data.token;var user=response.data.user;// Security values\nvar studyKey=response.data.user.studyKey;var salt=response.data.user.salt;var iv=response.data.user.iv;var peerGroupId=response.data.allUserData.peerGroupId;var regionID=response.data.allUserData.regionID;var decryptedKey=decryptKeyCBC(password.value,studyKey,iv,salt);setLoading(false);setUserSession(token,user,password.value,decryptedKey,iv,salt,peerGroupId,regionID);loadData(token);var storedPeerGroupId=localStorage.getItem(\"lastSelectedPeerGroup\");var storedRegionId=localStorage.getItem(\"storedRegionId\");if(!localStorage.getItem(\"lastSelectedPeerGroup\")){fetchPeerGroup(storedPeerGroupId).then(function(r){return console.log(r);});fetchRegionById(storedRegionId).then(function(r){return console.log(r);});}else{fetchPeerGroup(storedPeerGroupId).then(function(r){return console.log(r);});fetchRegionById(storedRegionId).then(function(r){return console.log(r);});}// participantBreakdown(token);\n//range(token);\nprops.history.push('/dashboard');}).catch(function(error){if(error.response){setErrorMsg(/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error.response.data.message})}));}username.setValue='';password.setValue='';setLoading(false);console.log(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",style:{// todo - change the background\nbackgroundImage:\"url(\"+\"https://raw.githubusercontent.com/sahracton/randomStuf/main/Background.png\"+\")\",width:\"100%\",height:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:\"12%\"}}),/*#__PURE__*/_jsx(\"img\",{className:\"w-50 mx-auto d-block mt-5\",style:{height:\"127.07px\",width:\"139.65px\"},src:PeerformanceLogo,alt:\"Peerformance Logo\"}),/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:\"1%\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-10 col-sm-12 mx-auto\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"form\",{className:\"w-100\",noValidate:true,style:{paddingLeft:\"15%\",paddingRight:\"15%\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"group-input p-3\",style:{backgroundColor:\"#313B65\",border:\"solid 15px #313B65\",borderRadius:\"10px\"},children:[errorMsg,/*#__PURE__*/_jsxs(\"div\",{className:\"group-input mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},username),{},{className:\"form-control  mt-2\",style:{backgroundColor:\"#192141\",borderColor:\"#192141\",color:\"#FFFFFF\"},\"aria-describedby\":\"emailHelp\",placeholder:\"  Enter your email address\"}))]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},password),{},{type:isRevealPwd?\"text\":\"password\",style:{backgroundColor:\"#192141\",borderColor:\"#192141\",color:\"#FFFFFF\"},className:\"form-control\",placeholder:\"  ************\",\"aria-label\":\"Password\",\"aria-describedby\":\"basic-addon2\"})),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"basic-addon2\",style:{backgroundColor:\"#192141\",borderColor:\"#192141\"},children:/*#__PURE__*/_jsx(\"img\",{title:isRevealPwd?\"Hide password\":\"Show password\",style:{width:\"17px\",height:\"24px\"},src:isRevealPwd?eye_off:eye_on,onClick:function onClick(){return setIsRevealPwd(function(prevState){return!prevState;});}})})})]}),/*#__PURE__*/_jsx(\"small\",{style:{display:'flex',justifyContent:'flex-end'},children:\"Forgot Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center d-grid gap-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary text-center\",value:loading?'Loading...':'Login',onClick:handleLogin,disabled:loading,style:{backgroundColor:\"#4368F6\"},children:\"Sign in\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",value:\"\",id:\"flexCheckDefault\",style:{height:\"20px\",width:\"20px\",borderColor:\"#5E6891\",backgroundColor:\"#313B65\"}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"flexCheckDefault\",style:{color:\"#A8B0D1\",paddingLeft:\"1.2vh\"},children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{style:{colour:\"black\",backgroundColor:\"black\",height:\"0.2px\",left:\"100%\",margin:\"2px -32px 20px\"}}),/*#__PURE__*/_jsx(\"div\",{style:{alignContent:\"center\",textAlign:\"center\"},children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have any account?\",/*#__PURE__*/_jsx(\"small\",{style:{fontSize:\"15.5px\",color:peerformanceBabyBlue},children:/*#__PURE__*/_jsx(\"a\",{style:{textDecoration:\"none\"},href:\"/signup\",children:\" Create Account\"})})]})})]})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",style:{backgroundColor:'#313B65'},children:/*#__PURE__*/_jsxs(\"div\",{class:\" container justify-content-md-center\",style:{width:\"100%\",paddingTop:\"8%\",left:\"900px\",paddingLeft:\"10%\",right:\"298px\",height:\"100vh\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{paddingTop:\"27.59%\",paddingBottom:\"5%\",lineHeight:\"150%\",width:\"600px\",color:\"white\",fontSize:\"38px\"},children:\"Operate a more efficient and profitable business\"}),/*#__PURE__*/_jsx(\"img\",{src:greenTick,style:{width:\"2.5%\"},alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#A5ACCB\",marginTop:\"-25px\",paddingLeft:\"3vh\",paddingBottom:\"1vh\"},children:\"Track your performance against the competition each month\"}),/*#__PURE__*/_jsx(\"img\",{src:greenTick,style:{width:\"2.5%\"}}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#A5ACCB\",marginTop:\"-25px\",paddingLeft:\"3vh\",width:\"550px\",paddingBottom:\"1vh\"},children:\"Join peer studies anonymously without your data being revealed to anyone, including Peerformance\"}),/*#__PURE__*/_jsx(\"img\",{src:greenTick,style:{width:\"2.5%\"},alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#A5ACCB\",marginTop:\"-25px\",paddingLeft:\"3vh\"},children:\"Unlock your encrypted results with your private key which only you hold\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#38D982\",paddingTop:\"4.07%\",width:\"550px\",lineHeight:\"150%\",fontSize:\"32px\"},children:\"See your business performance like never before\"})]})})]}),/*#__PURE__*/_jsxs(CookieConsent,{enableDeclineButton:true,flipButtons:true,onAccept:function onAccept(acceptedByScrolling){if(acceptedByScrolling){}},onDecline:function onDecline(){alert(\"nay!\");},children:[\"This website uses cookies to enhance the user experience.\",\" \",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"10px\"},children:\"This bit of text is smaller :O\"})]})]});}var useFormInput=function useFormInput(initialValue){var _useState7=useState(initialValue),_useState8=_slicedToArray(_useState7,2),value=_useState8[0],setValue=_useState8[1];var handleChange=function handleChange(e){setValue(e.target.value);};return{value:value,onChange:handleChange};};export default Home;/***/","map":{"version":3,"sources":["/home/mspl/Desktop/peerformance_frontend/src/Home.js"],"names":["Navbar","Nav","NavDropdown","Button","FormControl","Form","Col","Container","Row","InputGroup","React","useState","axios","setUserSession","decryptKeyCBC","loadData","CookieConsent","peerformanceBabyBlue","peerformanceDarkBlue","range","fetchPeerGroup","fetchRegionById","getRegionById","Home","props","loading","setLoading","username","useFormInput","password","categoryTime","localStorage","getItem","errorMsg","setErrorMsg","isRevealPwd","setIsRevealPwd","handleLogin","post","value","then","response","token","data","user","studyKey","salt","iv","peerGroupId","allUserData","regionID","decryptedKey","storedPeerGroupId","storedRegionId","r","console","log","history","push","catch","error","message","setValue","backgroundImage","width","height","paddingBottom","PeerformanceLogo","paddingLeft","paddingRight","backgroundColor","border","borderRadius","borderColor","color","eye_off","eye_on","prevState","display","justifyContent","colour","left","margin","alignContent","textAlign","fontSize","textDecoration","paddingTop","right","lineHeight","greenTick","marginTop","acceptedByScrolling","alert","initialValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import {Navbar, Nav, NavDropdown, Button, FormControl, Form, Col, Container, Row, InputGroup} from 'react-bootstrap';\nimport React, {useState} from 'react';\nimport axios from 'axios';\nimport {setUserSession} from './Utils/Common';\nimport {decryptKeyCBC} from './Utils/DecryptKeyCBC';\nimport PeerformanceLogo from '../src/assets/peerformance_logo.svg';\nimport greenTick from \"../src/Styleguide/icons/green_tick.svg\"\nimport eye_off from \"../src/Styleguide/icons/eye_off.svg\"\nimport eye_on from \"../src/Styleguide/icons/eye_on.svg\"\nimport loadData from \"./Utils/category\";\nimport CookieConsent from \"react-cookie-consent\";\n\nimport {peerformanceBabyBlue, peerformanceDarkBlue} from \"./colours\";\nimport range from \"./Utils/getParticipantRange\";\nimport {fetchPeerGroup, fetchRegionById} from \"./store/dashboardFetches\";\nimport {getRegionById} from \"./store/dashboardActions\";\n\n\nfunction Home(props) {\n    const [loading, setLoading] = useState(false);\n    let username = useFormInput('');\n    let password = useFormInput('');\n    let categoryTime = localStorage.getItem('categoryTime');\n    const [errorMsg, setErrorMsg] = useState('');\n    const [isRevealPwd, setIsRevealPwd] = useState(false);\n\n\n    // handle button click of login form\n    const handleLogin = () => {\n\n        setLoading(true);\n\n        axios.post('/login', {\n            username: username.value,\n            password: password.value,\n            categoryTime: categoryTime,\n        }).then(response => {\n            // Create variable for all of the values that we have received\n            let token = response.data.token;\n            let user = response.data.user;\n            // Security values\n            let studyKey = response.data.user.studyKey;\n            let salt = response.data.user.salt;\n            let iv = response.data.user.iv;\n\n            let peerGroupId = response.data.allUserData.peerGroupId;\n            let regionID = response.data.allUserData.regionID;\n\n            let decryptedKey = decryptKeyCBC(password.value, studyKey, iv, salt);\n            setLoading(false);\n\n            setUserSession(token, user, password.value, decryptedKey, iv, salt, peerGroupId, regionID);\n            loadData(token);\n\n            let storedPeerGroupId = localStorage.getItem(\"lastSelectedPeerGroup\");\n            let storedRegionId = localStorage.getItem(\"storedRegionId\");\n\n            if (!localStorage.getItem(\"lastSelectedPeerGroup\")) {\n                fetchPeerGroup(storedPeerGroupId).then(r => console.log(r));\n                fetchRegionById(storedRegionId).then(r => console.log(r));\n            } else {\n                fetchPeerGroup(storedPeerGroupId).then(r => console.log(r));\n                fetchRegionById(storedRegionId).then(r => console.log(r));\n            }\n\n            // participantBreakdown(token);\n            //range(token);\n\n            props.history.push('/dashboard');\n        }).catch(error => {\n            if (error.response) {\n                setErrorMsg(<div>\n                    {(\n                        <div className=\"alert alert-danger\" role=\"alert\">\n                            {error.response.data.message}\n                        </div>\n                    )}</div>)\n\n            }\n            username.setValue = ''\n            password.setValue = '';\n            setLoading(false);\n            console.log(error)\n        });\n    }\n\n    return (\n\n        <div className='container-fluid'\n             style={{\n                 // todo - change the background\n                 backgroundImage: \"url(\" + \"https://raw.githubusercontent.com/sahracton/randomStuf/main/Background.png\" + \")\",\n                 width: \"100%\",\n                 height: \"100%\"\n             }}>\n            <div className='row'>\n                <div className='col-md-6'>\n                    <div style={{paddingBottom: \"12%\"}}></div>\n                    <img\n                        className='w-50 mx-auto d-block mt-5'\n                        style={{\n                            height: \"127.07px\",\n                            width: \"139.65px\",\n                        }}\n                        src={PeerformanceLogo}\n                        alt='Peerformance Logo'\n                    />\n\n                    <div style={{paddingBottom: \"1%\"}}></div>\n\n                    <div className='col-md-10 col-sm-12 mx-auto'>\n                        <br/>\n                        <form className=\"w-100\" noValidate style={{\n                            paddingLeft: \"15%\",\n                            paddingRight: \"15%\",\n                        }}>\n                            <div className=\"row mt-3\">\n                                <div className=\"group-input p-3\" style={{\n                                    backgroundColor: \"#313B65\",\n                                    border: \"solid 15px #313B65\",\n                                    borderRadius: \"10px\"\n                                }}>\n\n                                    {errorMsg}\n\n\n                                    <div className=\"group-input mt-3\">\n                                        <label htmlFor=\"exampleInputEmail1\">Email address</label>\n                                        <input type=\"text\" {...username} className=\"form-control  mt-2\"\n                                               style={{\n                                                   backgroundColor: \"#192141\",\n                                                   borderColor: \"#192141\",\n                                                   color: \"#FFFFFF\"\n                                               }}\n                                               aria-describedby=\"emailHelp\" placeholder=\"  Enter your email address\"/>\n                                    </div>\n\n                                    {/* new pwd */}\n                                    <br/>\n                                    <label htmlFor=\"exampleInputPassword1\">Password</label>\n                                    <div className=\"input-group mb-3\">\n\n                                        <input {...password}\n                                               type={isRevealPwd ? \"text\" : \"password\"}\n                                               style={{\n                                                   backgroundColor: \"#192141\",\n                                                   borderColor: \"#192141\",\n                                                   color: \"#FFFFFF\"\n                                               }}\n                                               className=\"form-control\"\n                                               placeholder=\"  ************\"\n                                               aria-label=\"Password\"\n                                               aria-describedby=\"basic-addon2\"/>\n\n                                        <div className=\"input-group-append\">\n                                            <span className=\"input-group-text\" id=\"basic-addon2\"\n                                                  style={{\n                                                      backgroundColor: \"#192141\",\n                                                      borderColor: \"#192141\",\n                                                  }}>\n                                                 <img\n                                                     title={isRevealPwd ? \"Hide password\" : \"Show password\"}\n                                                     style={{width: \"17px\", height: \"24px\"}}\n                                                     src={isRevealPwd ? eye_off : eye_on}\n                                                     onClick={() => setIsRevealPwd(prevState => !prevState)}\n                                                 />\n                                            </span>\n                                        </div>\n                                    </div>\n                                    {/*end */}\n                                    <small style={{display: 'flex', justifyContent: 'flex-end'}}>\n                                        Forgot Password\n                                    </small>\n                                    <br/>\n\n                                    <div className='text-center d-grid gap-4'>\n                                        <button\n                                            type='submit'\n                                            className='btn btn-primary text-center'\n                                            value={loading ? 'Loading...' : 'Login'}\n                                            onClick={handleLogin}\n                                            disabled={loading}\n                                            style={{backgroundColor: \"#4368F6\"}}\n                                        >\n                                            Sign in\n                                        </button>\n                                    </div>\n                                    <br/>\n                                    <div className=\"form-check\">\n                                        <input className=\"form-check-input\" type=\"checkbox\" value=\"\"\n                                               id=\"flexCheckDefault\"\n                                               style={{\n                                                   height: \"20px\",\n                                                   width: \"20px\",\n                                                   borderColor: \"#5E6891\",\n                                                   backgroundColor: \"#313B65\"\n                                               }}/>\n                                        <label className=\"form-check-label\" htmlFor=\"flexCheckDefault\"\n                                               style={{color: \"#A8B0D1\", paddingLeft: \"1.2vh\",}}>\n                                            Remember me\n                                        </label>\n                                    </div>\n                                    <br/>\n                                    <div\n                                        style={{\n                                            colour: \"black\",\n                                            backgroundColor: \"black\",\n                                            height: \"0.2px\",\n                                            left: \"100%\",\n                                            margin: \"2px -32px 20px\",\n                                        }}\n                                    >\n                                    </div>\n\n                                    <div style={{alignContent: \"center\", textAlign: \"center\"}}>\n                                        <p>Don't have any account?\n                                            <small\n                                                style={{fontSize: \"15.5px\", color: peerformanceBabyBlue}}>\n                                                <a style={{textDecoration: \"none\"}} href=\"/signup\"> Create Account</a>\n                                            </small>\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n\n                <div className='col-md-6' style={{backgroundColor: '#313B65'}}>\n                    <div class=\" container justify-content-md-center\"\n                         style={{\n                             width: \"100%\",\n                             paddingTop: \"8%\",\n                             left: \"900px\",\n                             paddingLeft: \"10%\",\n                             right: \"298px\",\n                             height: \"100vh\"\n                         }}>\n                        <p style={{\n                            paddingTop: \"27.59%\",\n                            paddingBottom: \"5%\",\n                            lineHeight: \"150%\",\n                            width: \"600px\",\n                            color: \"white\",\n                            fontSize: \"38px\"\n                        }}>\n                            Operate a more efficient and profitable business\n                        </p>\n\n\n                        <img src={greenTick} style={{width: \"2.5%\",}}\n                             alt=\"\"/>\n                        <p style={{color: \"#A5ACCB\", marginTop: \"-25px\", paddingLeft: \"3vh\", paddingBottom: \"1vh\"}}>\n                            Track your performance against the competition each month\n                        </p>\n\n                        <img src={greenTick} style={{width: \"2.5%\"}}/>\n\n                        <p style={{\n                            color: \"#A5ACCB\",\n                            marginTop: \"-25px\",\n                            paddingLeft: \"3vh\",\n                            width: \"550px\",\n                            paddingBottom: \"1vh\"\n                        }}>\n                            Join peer studies anonymously without your data being revealed to anyone, including\n                            Peerformance\n                        </p>\n\n\n                        <img src={greenTick} style={{width: \"2.5%\",}} alt=\"\"/>\n                        <p style={{color: \"#A5ACCB\", marginTop: \"-25px\", paddingLeft: \"3vh\"}}>\n                            Unlock your encrypted results with your private key which only you hold\n                        </p>\n                        <p style={{\n                            color: \"#38D982\",\n                            paddingTop: \"4.07%\",\n                            width: \"550px\",\n                            lineHeight: \"150%\",\n                            fontSize: \"32px\"\n                        }}>\n                            See your business performance like never before\n                        </p>\n                    </div>\n                </div>\n            </div>\n\n            <CookieConsent enableDeclineButton flipButtons\n                           onAccept={(acceptedByScrolling) => {\n                               if (acceptedByScrolling) {\n                               }\n                           }}\n                           onDecline={() => {\n                               alert(\"nay!\");\n                           }}\n            >\n                This website uses cookies to enhance the user experience.{\" \"}\n                <span style={{fontSize: \"10px\"}}>This bit of text is smaller :O</span>\n            </CookieConsent>\n        </div>\n    );\n}\n\nconst useFormInput = initialValue => {\n    const [value, setValue] = useState(initialValue);\n\n    const handleChange = e => {\n        setValue(e.target.value);\n    }\n    return {\n        value,\n        onChange: handleChange\n    }\n}\nexport default Home;\n\n/***/\n"]},"metadata":{},"sourceType":"module"}